import groovy.json.JsonSlurperClassic

def jsonParse(def json) {
	new groovy.json.JsonSlurperClassic().parseText(json)
}

pipeline {
	agent any
	environment {
		appName = "variable"
	}

	stages {
		node ('Falcon') {
			stage("Paso 1 on Agent Falcon") {
				steps {
					script {
						sh "echo 'Hola Mundo 1!'"
					}
				}
			}
			stage("Paso 2 on Agent Falcon") {
				steps {
					script {
						sh "echo 'Hola Mundo 2!'"
					}
				}
			}
		}
		node ('Container') {
			stage("Paso 3 on Agent Container") {
				agent { label 'Container' }
				steps {
					script {
						sh "echo 'Hola Mundo 3!'"
					}
				}
			}
		}
	}
	post {
		always {
			deleteDir()
			sh "echo 'Fase always'"
		}
		success {
			sh "echo 'Fase Success'"
		}
		failure {
			sh "echo 'Fase Failure'"
		}
	}
}